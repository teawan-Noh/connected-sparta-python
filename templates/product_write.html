<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Webpage Title -->
    <title>Home | CONNECTED</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- og태그 & Favicon -->
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <meta property="og:title" content="connected"/>
    <meta property="og:description" content="mini project for Web Plus"/>
    <meta property="og:image" content="{{ url_for('static', filename='ogimg.png') }}"/>
    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- Font Awesome CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 코드 길이를 줄이기 위해 중복되는 css 파일은 합쳐보자! -->
    <!-- Bulma에 대한 css이기 때문에 Bulma CSS보다 아래에 위치해야한다. -->
    <link href="{{ url_for('static', filename='mystyle.css') }}" rel="stylesheet">
    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="{{ url_for('static', filename='myjs.js') }}"></script>

<!--    <script>-->
<!--    $(document).ready(function () {-->
<!--        get_products()-->
<!--    })-->
<!--    </script>-->

</head>
<body>
<nav class="navbar is-fixed-top is-white" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="/">
            <img src="{{ url_for('static', filename='logo.png') }}">
            <strong class="is-sparta"
                    style="font-family: 'Stylish', sans-serif;font-size: larger;">connected</strong>
        </a>

        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"
           data-target="navbarBasicExample">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div id="navbar-category" class="navbar-menu" style="align-self: center">
        <div class="navbar-start">
            <a class="navbar-item" onclick='$("#modal-category").addClass("is-active")'>
                지역 검색 / 일정 검색
            </a>
        </div>
    </div>
    <div class="modal" id="modal-category">
        <div class="modal-background" onclick='$("#modal-category").removeClass("is-active")'></div>
        <div class="tabs is-centered">
            <ul>
                <li class="is-active"><a>지역</a></li>
                <li><a>일정</a></li>
            </ul>
        </div>
        <button class="modal-close is-large" aria-label="close"
                onclick='$("#modal-category").removeClass("is-active")'></button>
    </div>

    <div id="navbar-content" class="navbar-end">
        <div class="navbar-start">
            <a class="navbar-item">여행 상품</a>
            <a class="navbar-item">커뮤니티</a>
            <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link" href="">
                    마이페이지
                </a>
                <div class="navbar-dropdown">
                    <a class="navbar-item" href="">
                        회원정보
                    </a>
                    <a class="navbar-item" href="">
                        장바구니 내역
                    </a>
                    <a class="navbar-item" href="">
                        즐겨찾기
                    </a>
                    <a class="navbar-item" href="">
                        내가 쓴 댓글
                    </a>
                    <a class="navbar-item" href="/logout">
                        로그아웃
                    </a>
                </div>
            </div>
        </div>
    </div>
</nav>
<div class="columns" style="max-width: 1200px; margin:auto;">
    {% if result == 'guide' %}
    <div class="box">
        <article class="media">
            <div class="media-content">
                <div class="field">
                    <label class="label" for="input-title">제목</label>
                    <p class="control">
                        <input id="input-title" class="input"
                               placeholder="제목" value="{{ products.title }}">
                    </p>
                </div>
                <div class="field">
                    <label class="label" for="input-picture">사진</label>
                    <div class="control is-expanded">
                        <div class="file has-name">
                            <label class="file-label" style="width:100%">
                                <input id="input-picture" class="file-input" type="file"
                                       name="resume">
                                <span class="file-cta">
                                    <span class="file-icon"><i class="fa fa-upload"></i></span>
                                    <span class="file-label">파일 선택</span>
                                </span>
                                <span id="file-name" class="file-name"
                                      style="width:100%;max-width:100%">{{ products.file }}</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="field">
                    <label class="label" for="input-content">내용</label>
                    <p class="control">
                        <textarea id="input-content" class="textarea"
                                  placeholder="내용">{{ products.content }}</textarea>
                    </p>
                </div>
                <div class="field">
                    <label class="label" for="startpoint_address">출발 위치</label>
                    <p class="control">
                        <input type="text" id="sample5_address" placeholder="주소">
                        <input type="button" onclick="sample5_execDaumPostcode()" value="주소 검색"><br>
                        <div id="map" style="width:50%;height:650px;margin-top:10px;display:none"></div>

                        <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
                        <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=03d0eb34b366026c640028dde39ff7e9&libraries=services"></script>
                        <script>
                            let x;
                            let y;
                            var mapContainer = document.getElementById('map'), // 지도를 표시할 div
                                mapOption = {
                                    center: new daum.maps.LatLng(37.537187, 127.005476), // 지도의 중심좌표
                                    level: 5 // 지도의 확대 레벨
                                };

                            //지도를 미리 생성
                            var map = new daum.maps.Map(mapContainer, mapOption);
                            //주소-좌표 변환 객체를 생성
                            var geocoder = new daum.maps.services.Geocoder();

                            var marker = new daum.maps.Marker({
                                position: new daum.maps.LatLng(37.537187, 127.005476),
                                map: map
                            });

                            function sample5_execDaumPostcode() {
                                new daum.Postcode({
                                    oncomplete: function (data) {
                                        var addr = data.address; // 최종 주소 변수

                                        // 주소 정보를 해당 필드에 넣는다.
                                        document.getElementById("sample5_address").value = addr;
                                        // 주소로 상세 정보를 검색
                                        geocoder.addressSearch(data.address, function (results, status) {
                                            // 정상적으로 검색이 완료됐으면
                                            if (status === daum.maps.services.Status.OK) {

                                                var result = results[0]; //첫번째 결과의 값을 활용

                                                // 해당 주소에 대한 좌표를 받아서
                                                var coords = new daum.maps.LatLng(result.y, result.x);
                                                x = coords.La // 경도
                                                y = coords.Ma // 위도
                                                // 지도를 보여준다.
                                                mapContainer.style.display = "block";
                                                map.relayout();
                                                // 지도 중심을 변경한다.
                                                map.setCenter(coords);
                                                // 마커를 결과값으로 받은 위치로 옮긴다.
                                                marker.setPosition(coords)
                                            }
                                        });
                                    }
                                }).open();
                            }

                        </script>
                    </p>
                </div>
                <div class="field">
                    <label class="label" for="input-calender">달력</label>
                    <p class="control">
                        <input id="input-calender" class="input"
                               placeholder="달력" value="{{ products.calender }}">
                    </p>
                </div>
                <div class="field">
                    <label class="label" for="input-price">가격</label>
                    <p class="control">
                        <input id="input-price" class="input"
                               placeholder="가격" value="{{ products.price }}">
                    </p>
                </div>
                <div class="level-right">
                    <div class="level-item">
                        <a class="button is-sparta" onclick="posting(x,y)">등록</a>
                    </div>
                    <div class="level-item">
                        <a class="button is-sparta is-outlined" href="/product">취소</a>
                    </div>
                </div>
            </div>
        </article>
    </div>
    {% endif %}
</div>
</body>
</html>